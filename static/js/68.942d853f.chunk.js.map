{"version":3,"sources":["templates/overlay-layout.js"],"names":["HeaderSubComponent","designJSON","CustomHome","props","getlogouturl","fetch","window","location","pathname","method","headers","then","response","json","data","logout","windowOrg","hasOwnProperty","origin","localStorage","setItem","href","substring","length","catch","setState","message","t","loading","callTimeout","dialogShow","removeItem","handleDrawerOpen","open","handleDrawerClose","checkForPermittedApps","currentAppObj","getItem","JSON","parse","find","n","link","existingApp","checkForPermittedCommonApp","commonapp","map","item","rsname","indexOf","nestedElement","id","getVisibility","cname","hasNav","commonImpacted","loadedAppObject","filter","nav","hash","split","undefined","mainID","commonImpactedApp","obj","originaterApp","commonImpactedObject","impactedContainer","commonappVal","containerName","StylingAttributes","Container","mainSection","listenEvent","state","userInfo","clearInterval","timer","timeoutmsg","clear","history","push","this","poll","polling","isNaN","setInterval","lazy","header","componentName","sessionID","wshost","host","replace","wshostname","hostname","protocol","ioClient","io","connect","transports","wsport","on","emit","console","log","postMessage","stringify","eventType","payload","show","variant","userData","name","email","title","firstName","lastName","showDialog","onClick","autoFocus","classes","theme","type","className","root","fallback","style","opacity","backgroundColor","fetchUserMangtData","classname","CommonSection","mainAppId","commonappImpacted","React","Component","withTranslation","withStyles","webkitUserSelect","userSelect","withTheme"],"mappings":"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","file":"static/js/68.942d853f.chunk.js","sourcesContent":["import React , { lazy ,Suspense} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport withTheme  from '@material-ui/core/styles/withTheme';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport  size  from 'lodash/size';\r\nimport color from '@material-ui/core/colors/amber';\r\nimport MainComponent from '../components/MainComponent';\r\nimport CommonComponent from '../components/CommonComponent';\r\nimport Container from '../components/Container';\r\nlet HeaderSubComponent,designJSON;\r\nimport io from \"socket.io-client\";\r\nimport DialogBox from '../components/DialogBox';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport { withTranslation } from 'react-i18next';\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n  webkitUserSelect: 'none',\r\n  userSelect: 'none'}\r\n});\r\n\r\n\r\nclass CustomHome extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  this.state = {\r\n    open: false,\r\n    userInfo:{ },\r\n    dialogShow:false,\r\n  };\r\n}\r\n  poll() {\r\n    fetch(`${window.location.pathname}polling`,{\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Cache-Control':' no-cache' \r\n    }\r\n  })\r\n  .then(response =>response.json())\r\n  .then(data => {\r\n  if(data.message === 'failure') {\r\n          clearInterval(this.timer)\r\n          this.timer = null; \r\n            localStorage.setItem('sessionTimeOut',true);\r\n            this.setState({\r\n              dialogShow:true\r\n          });\r\n  }else {\r\n    if(data.timeoutmsg === 'session missing'){\r\n      localStorage.clear();\r\n      this.props.history.push('/');\r\n  }} \r\n  })\r\n  }\r\n  getlogouturl = () => {\r\n    fetch(`${window.location.pathname}logout`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'Cache-Control': ' no-cache'\r\n      }\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        let logout = data && data.logout;\r\n        let pathname = window.location.pathname;\r\n        let windowOrg = window.hasOwnProperty( \"location\" ) && window.location.origin;\r\n        localStorage.setItem(\"sessionLogout\", true);\r\n        localStorage.setItem('logoutSuccess', true)\r\n        window.location.href = logout + windowOrg + (pathname === '/' ? \"\" : \"/\" + pathname.substring(1, pathname.length));\r\n      }).catch(() => this.setState({ message: this.props.t('LoginError'), loading: false }));\r\n  }\r\n  callTimeout=()=> {\r\n    this.setState({dialogShow:false});\r\n    localStorage.removeItem(\"isAuthorized\");\r\n    localStorage.removeItem(\"activeToken\");\r\n    localStorage.removeItem(\"permissions\");\r\n    localStorage.removeItem(\"microapps\");\r\n    localStorage.removeItem(\"navigation\");\r\n    localStorage.removeItem(\"commonappImpacted\");\r\n    localStorage.removeItem(\"defaultAppLink\");\r\n    localStorage.removeItem(\"productName\");\r\n    localStorage.removeItem(\"app_link\");\r\n    localStorage.removeItem(\"authUrl\");\r\n    localStorage.removeItem(\"grantType\");\r\n    localStorage.removeItem(\"userInfoDialogMap\");\r\n    localStorage.removeItem(\"username\");\r\n    localStorage.removeItem(\"designTemplate\");\r\n    localStorage.removeItem(\"appfailed\");\r\n    localStorage.removeItem(\"headerMenuConfig\");\r\n    localStorage.removeItem(\"sessionTimeOut\");\r\n    localStorage.removeItem(\"UserInfo\");\r\n    localStorage.removeItem(\"tenantid\");\r\n    localStorage.removeItem(\"refreshWindow\");\r\n    localStorage.removeItem(\"showHeaderMenuIcon\");\r\n    localStorage.removeItem(\"menuItems\");\r\n    localStorage.removeItem(\"licencesUrl\");\r\n    localStorage.removeItem(\"thankYouMsg\");\r\n    localStorage.removeItem(\"unlicensedMessage\");\r\n    localStorage.removeItem(\"showHeaderMenuIcon\");\r\n    localStorage.removeItem(\"polling\");\r\n    localStorage.removeItem(\"wsport\");\r\n    localStorage.removeItem(\"tenancy\");\r\n    localStorage.removeItem(\"selectedApp\");\r\n    localStorage.removeItem(\"displayMenuItemOnHeader\");\r\n    localStorage.removeItem(\"displayMicroappOnHeader\");\r\n    localStorage.removeItem(\"applicationName\");\r\n    localStorage.removeItem(\"advanceNotificationMeta\");\r\n    localStorage.removeItem(\"selectedTenant\");\r\n    localStorage.removeItem(\"appVersion\");\r\n    this.getlogouturl();\r\n  }    \r\n  componentWillMount() {\r\n    this.poll();\r\n    let polling = localStorage.getItem('polling');\r\n    if(!isNaN(polling)){\r\n      this.timer = setInterval(()=> this.poll(), polling);\r\n    }\r\n    \n     designJSON={\"header\":{\"name\":\"app-header\",\"componentName\":\"VerticalHead\"},\"Container\":{\"classname\":\"grid-container\",\"StylingAttributes\":{\"display\":\"grid\",\"grid-template-rows\":\"25% 25% 25% 25%\",\"grid-template-columns\":\"25% 25% 25% 25%\",\"grid-auto-rows\":\"150px\",\"height\":\"calc(100vh - 72px)\",\"width\":\"100%\",\"margin-top\":\"72px\",\"padding-left\":\"58px\"},\"CommonSection\":[{\"name\":\"PinAppWrapper\",\"id\":\"PinAppWrapper\",\"containerName\":\"pinapp-wrapper\",\"type\":\"component\",\"StylingAttributes\":{\"grid-column-start\":\"1\",\"grid-column-end\":\"2\",\"grid-row-start\":\"1\",\"grid-row-end\":\"5\",\"z-index\":\"1205\",\"display\":\"none\",\"width\":\"0px\",\"overflow\":\"hidden\",\"border-right\":\"1px solid var(--color-border-common-primary)\",\"box-shadow\":\"var(--effect-base-drop-shadow-dark-small)\"},\"nested\":true,\"nestedElement\":{\"id\":\"assethierarchy\",\"name\":\"Asset hierarcy\",\"type\":\"App\",\"StylingAttributes\":{\"z-index\":\"1\"}}}],\"mainSection\":{\"name\":\"main-app\",\"type\":\"App\",\"StylingAttributes\":{\"grid-column-start\":\"1\",\"grid-column-end\":\"5\",\"grid-row-start\":\"1\",\"grid-row-end\":\"5\"}}},\"footer\":{}};\n\n    HeaderSubComponent=lazy(() => import(`../components/header/${designJSON.header.componentName}`));\r\n  }\r\n  componentDidMount() {\r\n    let polling = localStorage.getItem('polling');\r\n    if(isNaN(polling)){\r\n        this.sessionID = localStorage.getItem(\"activeToken\");\r\n        this.wshost = window.location.host.replace(/['\"]+/g, '');\r\n        this.wshostname = window.location.hostname.replace(/['\"]+/g, '');\r\n        this.protocol = window.location.protocol.replace(/['\"]+/g, '');\r\n        if (this.protocol === \"https:\") {\r\n          this.ioClient = io.connect(`wss://${this.wshost}`, {transports: ['websocket']});\r\n        }\r\n        else {\r\n          let wsport= JSON.parse(window.localStorage.getItem('wsport'));\r\n          this.ioClient = io.connect(`ws://${this.wshostname}:${wsport}`, {transports: ['websocket']});\r\n        }\r\n\r\n          this.ioClient.on(\"connect\", () => {  \r\n          this.ioClient.emit('token', this.sessionID);\r\n        });\r\n          this.ioClient.on('timeout', (data) => {\r\n            console.log('session expired msg from server',data);\r\n            this.ioClient.emit('leave', this.sessionID);\r\n            localStorage.setItem('sessionTimeOut',true);\r\n            window.postMessage(JSON.stringify({\r\n              eventType: 'session-timeout',\r\n              payload: {\r\n                show: true,\r\n                message: 'Session Timeout. ',\r\n                variant: 'error'\r\n              }\r\n            }));\r\n    \r\n          });\r\n        }\r\n     const userData = JSON.parse(localStorage.getItem('UserInfo'));\r\n      this.setState({\r\n      userInfo:{\r\n     \"name\" : userData && userData.name ? userData.name: \"\",\r\n     \"email\": userData && userData.email ? userData.email : \"\",\r\n     \"title\": userData && userData.title ? userData.title : \"\",\r\n     \"firstName\":userData && userData.firstName ? userData.firstName: \"\",\r\n     \"lastName\":userData && userData.lastName ? userData.lastName: \"\"\r\n    }\r\n    })\r\n  }\r\n\r\n  handleDrawerOpen = () => {\r\n    this.setState({ open: true });\r\n  };\r\n\r\n  handleDrawerClose = () => {\r\n    this.setState({ open: false });\r\n  };\r\n  checkForPermittedApps=()=>{\r\n    let currentAppName, navigationString = window.localStorage.getItem('navigation') !== null ? JSON.parse(window.localStorage.getItem('navigation')) : [],\r\n  currentAppObj = navigationString.find(n => n.link === this.props.location.pathname);\r\n  let microapplist= JSON.parse(window.localStorage.getItem('microapps'));\r\n  let existingApp =microapplist.find(n => n.link === this.props.location.pathname);\r\n  return ((existingApp && !currentAppObj)||(!existingApp && !currentAppObj));\r\n  }\r\n  checkForPermittedCommonApp=(commonapp)=>{\r\n    const permittedappslist=JSON.parse(localStorage.getItem('permissions'));\t\r\n    const permittedappslistIds= permittedappslist.map(item=>{return item.rsname});\t\r\n      return permittedappslistIds.indexOf(commonapp.nestedElement.id)>-1;\t\r\n  }\r\n  getVisibility=(cname)=>{\r\n    const hasNav = localStorage.getItem(\"navigation\");\r\n    const commonImpacted=(localStorage.getItem(\"commonappImpacted\") && localStorage.getItem(\"commonappImpacted\")!=\"undefined\")?JSON.parse(localStorage.getItem(\"commonappImpacted\")):null;\r\n    let loadedAppObject = hasNav && JSON.parse(localStorage.getItem('navigation')).filter(nav=>nav.link===window.location.hash.split(\"#\")[1])[0];\r\n    if(loadedAppObject && loadedAppObject!=undefined){\r\n      let mainID = loadedAppObject.id;\r\n      let commonImpactedApp = commonImpacted?commonImpacted.filter(obj => obj.originaterApp == mainID )[0]:undefined;\r\n      if(commonImpactedApp && commonImpactedApp!=undefined){\r\n        let commonImpactedObject = commonImpactedApp.impactedContainer.filter(commonappVal=> commonappVal.containerName[0]==cname);\r\n        if(commonImpactedObject.length>0){\r\n          return {\r\n            \"commonStylingUpdated\":commonImpactedObject[0].StylingAttributes,\r\n            \"mainStylingUpdated\":commonImpactedApp && commonImpactedApp.StylingAttributes ? commonImpactedApp.StylingAttributes:designJSON.Container.mainSection.StylingAttributes,\r\n            \"containerEvent\":commonImpactedObject && commonImpactedObject[0].StylingAttributes?commonImpactedObject[0].StylingAttributes.listenEvent!=undefined?commonImpactedObject[0].StylingAttributes.listenEvent:true:null\r\n              };\r\n            }\r\n        }\r\n  }\r\n  }\r\n  render() {\r\n    const {dialogShow ,eventType} = this.state;  \r\n    const {t}=this.props;\r\n    if( localStorage.getItem('sessionTimeOut') == \"true\"){\r\n      return(\r\n          <DialogBox showDialog={dialogShow} id={\"dialogPopup\"}>\r\n              <DialogTitle id=\"alert-dialog-title\">{t('SessionTimeout')}</DialogTitle>\r\n              <DialogContent>\r\n              <DialogContentText id=\"alert-dialog-description\">\r\n              {t('SessionTimeoutInfo')}\r\n              </DialogContentText>\r\n              </DialogContent>\r\n              <DialogActions>\r\n              <Button  onClick={this.callTimeout} autoFocus>\r\n              {t('Close')}\r\n              </Button>\r\n              </DialogActions>\r\n          </DialogBox>\r\n      )\r\n  }\r\n    \n        const { classes, theme } = this.props;\n        let {name,type,StylingAttributes}=designJSON.Container.mainSection;\n     \n        \n        return (\n          <div className={classes.root}>\n            <CssBaseline />\n            \n            <Suspense \n            fallback={<div style={{opacity:\"0\",backgroundColor:\"#05322B\"}}>\n            Loading...</div>}>\n            <HeaderSubComponent\n            handleDrawerOpen={this.handleDrawerOpen} \n            history={this.props.history}\n            handleDrawerClose={this.handleDrawerClose}\n            open={this.state.open}\n            location={this.props.location}\n            fetchUserMangtData={this.fetchUserMangtData}\n            userInfo={this.state.userInfo}\n            designJSON={designJSON}\n            />\n             </Suspense>\n        \n           \n           \n     \n            <div>\n            <Container style={designJSON.Container.StylingAttributes} classname={designJSON.Container.classname} >\n          {\n            JSON.parse(window.localStorage.getItem('navigation')).length!==0 ? \n            (\n              this.checkForPermittedApps() ?\n               null:\n               (\n                 designJSON.Container.CommonSection.length?\n                 (\n                   designJSON.Container.CommonSection.map(\n                   commonapp=>{\n                     return this.checkForPermittedCommonApp(commonapp)?<CommonComponent mainAppId={name} {...commonapp} commonappImpacted={this.getVisibility(commonapp.containerName)} />:null\n                   }\n                     )\n                     ):null\n               )\n               \n             ):null\n          }\n          {\n            type===\"App\"?\n            <MainComponent \n            open={this.state.open}   \n            location={this.props.location} \n            history={this.props.history}\n            classname={name}\n            style={StylingAttributes}\n            />:null\n          }\n            \n            </Container>\n            </div>\n\n           \n          </div>\n        );\r\n  }\r\n}\r\n\r\nCustomHome.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  theme: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withTranslation()(withStyles(styles, { withTheme: true })(CustomHome));\r\n"],"sourceRoot":""}