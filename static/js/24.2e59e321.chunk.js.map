{"version":3,"sources":["components/OpenResourceStaticPage.js"],"names":["withTranslation","withRouter","props","userInfoDialogMap","JSON","parse","window","localStorage","getItem","group","filter","n","subMenu","defaultSubMenu","length","default","title","icon","type","menuName","navigationString","nav","hasOwnProperty","visibility","i","location","hash","split","name","j","useState","dataHtml","setdataHtml","dialogShow","setdialogShow","eventType","seteventType","subName","setSubName","hideSpinner","setHideSpinner","_","startsWith","appTheme","useEffect","fetch","pathname","then","response","json","data","timeoutmsg","t","unescape","catch","error","showDialog","id","onClick","history","push","autoFocus","className","dangerouslySetInnerHTML","__html","style","height","map"],"mappings":"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","file":"static/js/24.2e59e321.chunk.js","sourcesContent":["/* \r\n *  *************************************************\r\n *   BH [Highly] Confidential\r\n *   [Unpublished] Copyright 2020.  Baker Hughes\r\n *  \r\n *   NOTICE:  All information contained herein is, and remains the property of Baker Hughes, and/or\r\n *   its affiliates.  The intellectual and technical concepts contained herein are proprietary to Baker Hughes\r\n *   and/or its affiliates and may be covered by patents, copyrights, and/or trade secrets.  Dissemination of this information or\r\n *   reproduction of this material is strictly forbidden unless prior written permission is obtained from Baker Hughes.\r\n *  **************************************************\r\n *  \r\n */\r\nimport React, { useState, useEffect } from 'react';\r\nimport { withRouter } from \"react-router\";\r\nimport './OpenResourceStaticPage.css';\r\nimport Loading from '../Loading';\r\nimport { withTranslation } from 'react-i18next';\r\nimport DialogBox from '../components/DialogBox';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport _ from \"lodash\";\r\n\r\n\r\nconst OpenResourceStaticPage = (props) => {\r\n  let userInfoDialogMap = JSON.parse(window.localStorage.getItem('userInfoDialogMap'));\r\n  let group = userInfoDialogMap.filter(n => n.subMenu);\r\n  let defaultSubMenu = group.length > 0 && group[0].subMenu.filter(n => n.default);\r\n  let title = '';\r\n  let icon = '';\r\n  let type = '';\r\n  let menuName = '';\r\n  let navigationString = localStorage.getItem('navigation') !== null ? JSON.parse(localStorage.getItem('navigation')) : [];\r\n  navigationString = navigationString.filter(nav => !nav.hasOwnProperty(\"visibility\") || nav.visibility);\r\n  for (let i = 0; i < userInfoDialogMap.length; i++) {\r\n    if (userInfoDialogMap[i].type !== 'group' && (userInfoDialogMap[i].location === '/' + window.location.hash.split(\"/\")[1])) {\r\n      title = userInfoDialogMap[i].name;\r\n      icon = userInfoDialogMap[i].icon;\r\n      type = userInfoDialogMap[i].type;\r\n      break;\r\n    } else if (userInfoDialogMap[i].type === 'group') {\r\n      for (let j = 0; j < userInfoDialogMap[i].subMenu.length; j++) {\r\n        if (userInfoDialogMap[i].subMenu[j].location === '/' + window.location.hash.split(\"/\")[1]) {\r\n          title = userInfoDialogMap[i].name;\r\n          icon = userInfoDialogMap[i].icon;\r\n          type = userInfoDialogMap[i].type;\r\n          menuName = userInfoDialogMap[i].subMenu[j].name\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  let [dataHtml, setdataHtml] = useState(\"\");\r\n  let [dialogShow, setdialogShow] = useState(false);\r\n  let [eventType, seteventType] = useState(\"\");\r\n  let [subName, setSubName] = useState(type !== 'group'?\"\":defaultSubMenu[0].name);\r\n  let [hideSpinner, setHideSpinner] = useState(false);\r\n  let [appTheme, setAppTheme] = useState(_.startsWith(localStorage.getItem(\"designTemplate\"), \"system\"))\r\n\r\n  /* istanbul ignore next */\r\n  function callTimeout() {\r\n    setdialogShow(false);\r\n    props.history.push('/login');\r\n}\r\n  function loadData(){\r\n  fetch(`${window.location.pathname}static/${window.location.hash.split(\"/\")[1]}`)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      if(data.timeoutmsg === 'success timeout'){\r\n        setdialogShow(true);\r\n        seteventType(\"session-timeout\");\r\n      }else if(data.data === 'error'){\r\n        setdataHtml(props.t(\"ErrorOpenSourceAttribution\"));\r\n        setHideSpinner(true);\r\n      }else{\r\n        setdataHtml(unescape(data.data));\r\n        setSubName(menuName);\r\n        setHideSpinner(true);\r\n      }\r\n  }).catch((error) => {\r\n    setdataHtml(props.t(\"ErrorOpenSourceAttribution\"));\r\n    setHideSpinner(true);\r\n  });    \r\n}\r\n\r\nfunction loadSubMenu(location, name){\r\n  fetch(`${window.location.pathname}static${location}`)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      if(data.data === 'error'){\r\n        setdataHtml(props.t(\"ErrorOpenSourceAttribution\"));\r\n        setHideSpinner(true);\r\n      }else{\r\n        setHideSpinner(true);\r\n        setdataHtml(unescape(data.data));\r\n        props.history.push(location);\r\n      }\r\n  });    \r\n}\r\n\r\nuseEffect(()=>{\r\n    loadData();\r\n  },[])\r\n  if(eventType==\"session-timeout\"){\r\n    return(\r\n        <DialogBox showDialog={dialogShow} id={\"dialogPopup\"}>\r\n            <DialogTitle id=\"alert-dialog-title\">{props.t('SessionTimeout')}</DialogTitle>\r\n            <DialogContent>\r\n            <DialogContentText id=\"alert-dialog-description\">\r\n            {props.t('SessionTimeoutInfo')}\r\n            </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n            <Button  onClick={callTimeout} autoFocus>\r\n            {props.t('Close')}\r\n            </Button>\r\n            </DialogActions>\r\n        </DialogBox>\r\n    )\r\n}\r\n return (\r\n  <div className={appTheme ? \"horizontal hide-drawer\" : navigationString.length === 0 ? \"vertical hide-drawer\" : \"vertical\"}>\r\n      <div className=\"e7700_96651\">\r\n            {\r\n              type !== 'group' ?\r\n              <div className=\"e7000_1208\">\r\n              <div className=\"activePage\">\r\n                <span className=\"e7700_96654\">{icon}</span>\r\n                <span className=\"e7700_96653\" id=\"leftStaticPagetitle\" >{props.t(title)}</span>\r\n              </div>\r\n                    <span className=\"e7000_1219\" id=\"staticPageContent\">\r\n                    {!hideSpinner ? <div style={{height:\"70vh\"}}><Loading /></div> : <div dangerouslySetInnerHTML={{ __html: props.t(dataHtml) }} />}\r\n                    </span>\r\n                    <div className=\"e7700_96601\"><span className=\"e7000_1217\" id=\"staticPageTitle\">{props.t(title)}</span></div></div>:\r\n\r\n              group[0].subMenu.map(n =>\r\n                <div className=\"e7000_1208\">              \r\n              <div className={(n.name === subName)?\"activePage\":\"e7700_96652\"} onClick={() => loadSubMenu(n.location, n.name)}>\r\n                <span className=\"e7700_96654\">{n.icon}</span> \r\n                <span className=\"e7700_96653\" id=\"leftStaticPagetitle\" >{props.t(n.name)}</span>\r\n              </div>\r\n                    <span className=\"e7000_1219\" id=\"staticPageContent\">\r\n                    {!hideSpinner ? <div style={{height:\"70vh\"}}><Loading /></div> : <div dangerouslySetInnerHTML={{ __html: props.t(dataHtml) }} />}\r\n                    </span>\r\n                    <div className=\"e7700_96601\"><span className=\"e7000_1217\" id=\"staticPageTitle\">{props.t(subName)}</span></div></div>)\r\n            }\r\n     \r\n      </div>\r\n</div>\r\n  )\r\n}\r\nexport default withTranslation()(withRouter(OpenResourceStaticPage));\r\n"],"sourceRoot":""}